<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-messaging-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyAdhUJoq7szgFbp8WN5bTKx3Ib6OR8Oh5o",
    authDomain: "stefanov-chat.firebaseapp.com",
    projectId: "stefanov-chat",
    storageBucket: "stefanov-chat.firebasestorage.app",
    messagingSenderId: "915409159507",
    appId: "1:915409159507:web:d4fade5388b7822968cda6"
  };

  firebase.initializeApp(firebaseConfig);
  const messaging = firebase.messaging();

  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/firebase-messaging-sw.js')
      .then((reg) => {
        console.log('Service Worker zaregistrovaný!', reg.scope);
      })
      .catch((err) => console.log('Chyba SW:', err));
  }

  async function aktivujUpozornenia() {
    try {
      const permission = await Notification.requestPermission();
      if (permission === 'granted') {
        console.log('Povolenie udelené.');

        const token = await messaging.getToken({
          vapidKey: "TU_BUDE_TVOJ_VAPID_KEY"
        });

        console.log("Tvoj token:", token);
      }
    } catch (error) {
      console.error('Chyba pri povolení:', error);
    }
  }

  aktivujUpozornenia();
</script>
